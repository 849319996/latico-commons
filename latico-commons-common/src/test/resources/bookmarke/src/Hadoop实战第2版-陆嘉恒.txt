目 录	2
前言	23
第2版与第1版的区别	24
本书面向的读者	25
如何阅读本书	26
在线资源及勘误	27
致谢	28
第1章　Hadoop简介	29
	1.1　什么是Hadoop	30
		1.1.2　Hadoop的历史	31
		1.1.3　Hadoop的功能与作用	32
		1.1.4　Hadoop的优势	33
		1.1.5　Hadoop应用现状和发展趋势	34
	1.2　Hadoop项目及其结构	35
	1.3　Hadoop体系结构	39
	1.4　Hadoop与分布式开发	41
	1.5　Hadoop计算模型—MapReduce	45
	1.6　Hadoop数据管理	46
		1.6.1　HDFS的数据管理	46
		1.6.2　HBase的数据管理	49
		1.6.3　Hive的数据管理	52
	1.7　Hadoop集群安全策略	56
	1.8　本章小结	59
第2章　Hadoop的安装与配置	60
	2.1　在Linux上安装与配置Hadoop	61
		2.1.1　安装JDK 1.6	61
		2.1.2　配置SSH免密码登录	64
		2.1.3　安装并运行Hadoop	67
	2.2　在Mac OSX上安装与配置Hadoop	70
		2.2.1　安装Homebrew	70
		2.2.2　使用Homebrew安装Hadoop	71
		2.2.3　配置SSH和使用Hadoop	72
	2.3　在Windows上安装与配置Hadoop 2.3.1 安装JDK 1.6或更高版本	73
		2.3.2　安装Cygwin	74
		2.3.3　配置环境变量	75
		2.3.4　安装sshd服务	76
		2.3.5　启动sshd服务	77
		2.3.6　配置SSH免密码登录	78
		2.3.7　安装并运行Hadoop	79
	2.4　安装和配置Hadoop集群	80
		2.4.2　定义集群拓扑	81
		2.4.3　建立和安装Cluster	83
	2.5　日志分析及几个小技巧	92
	2.6　本章小结	94
第3章　MapReduce计算模型	95
	3.1　为什么要用MapReduce	96
	3.2　MapReduce计算模型	98
		3.2.1　MapReduce Job	98
		3.2.2　Hadoop中的Hello World程序	99
		3.2.3　MapReduce的数据流和控制流	110
	3.3　MapReduce任务的优化	113
	3.4　Hadoop流	116
		3.4.1　Hadoop流的工作原理	116
		3.4.2　Hadoop流的命令	119
		3.4.3　两个例子	121
	3.5　Hadoop Pipes	123
	3.6　本章小结	127
第4章　开发MapReduce应用程序	128
	4.1　系统参数的配置	129
	4.2　配置开发环境	133
	4.3　编写MapReduce程序	134
		4.3.1　Map处理	134
		4.3.2　Reduce处理	136
	4.4　本地测试	137
	4.5　运行MapReduce程序	138
		4.5.1　打包	139
		4.5.2　在本地模式下运行	141
		4.5.3　在集群上运行	142
	4.6　网络用户界面	143
		4.6.1　JobTracker页面	143
		4.6.2　工作页面	144
		4.6.3　返回结果	146
		4.6.4　任务页面	148
		4.6.5　任务细节页面	149
	4.7　性能调优	150
		4.7.1　输入采用大文件	150
		4.7.2　压缩文件	152
		4.7.3　过滤数据	153
		4.7.4　修改作业属性	157
	4.8　MapReduce工作流	158
		4.8.1　复杂的Map和Reduce函数	158
		4.8.2　MapReduce Job中全局共享数据	161
		4.8.3　链接MapReduce Job	164
	4.9　本章小结	167
第5章　MapReduce应用案例	168
	5.1　单词计数	169
		5.1.1　实例描述	169
		5.1.2　设计思路	170
		5.1.3　程序代码	171
		5.1.4　代码解读	173
		5.1.5　程序执行	174
		5.1.6　代码结果	176
		5.1.7　代码数据流	177
	5.2　数据去重	179
		5.2.2　设计思路	181
		5.2.3　程序代码	182
	5.3　排序	184
		5.3.1　实例描述	184
		5.3.2　设计思路	186
		5.3.3　程序代码	187
	5.4　单表关联	189
		5.4.1　实例描述	189
		5.4.2　设计思路	191
		5.4.3　程序代码	192
	5.5　多表关联	195
		5.5.2　设计思路	196
		5.5.3　程序代码	197
	5.6　本章小结	200
第6章　MapReduce工作机制	201
	6.1　MapReduce作业的执行流程	202
		6.1.1　MapReduce任务执行总流程	202
		6.1.2　提交作业	205
		6.1.3　初始化作业	208
		6.1.4　分配任务	211
		6.1.5　执行任务	214
		6.1.6　更新任务执行进度和状态	216
		6.1.7　完成作业	218
	6.2　错误处理机制	219
		6.2.1　硬件故障	219
		6.2.2　任务失败	221
	6.3　作业调度机制	222
	6.4　Shuffle和排序	224
		6.4.1　Map端	224
		6.4.2　Reduce端	227
		6.4.3　shuffle过程的优化	229
	6.5　任务执行	230
		6.5.1　推测式执行	230
		6.5.2　任务JVM重用	232
		6.5.3　跳过坏记录	233
		6.5.4　任务执行环境	234
	6.6　本章小结	236
第7章　Hadoop I/O操作	238
	7.1　I/O操作中的数据检查	240
	7.2　数据的压缩	250
		7.2.1　Hadoop对压缩工具的选择	250
		7.2.2　压缩分割和输入分割	252
		7.2.3　在MapReduce程序中使用压缩	253
	7.3　数据的I/O中序列化操作	255
		7.3.1　Writable类	255
		7.3.2　实现自己的Hadoop数据类型	269
	7.4　针对Mapreduce的文件类	271
		7.4.1　SequenceFile类	271
		7.4.2　MapFile类	279
		7.4.3　ArrayFile、SetFile和BloomMapFile	282
	7.5　本章小结	286
第8章　下一代MapReduce：YARN	287
	8.1　MapReduce V2设计需求	289
	8.2　MapReduce V2主要思想和架构	290
	8.3　MapReduce V2设计细节	295
	8.4　MapReduce V2优势	300
	8.5　本章小结	301
第9章　HDFS详解	302
	9.1　Hadoop的文件系统	303
	9.2　HDFS简介	306
	9.3　HDFS体系结构	308
		9.3.1　HDFS的相关概念	308
		9.3.2　HDFS的体系结构	310
	9.4　HDFS的基本操作	314
		9.4.1　HDFS的命令行操作	314
		9.4.2　HDFS的Web界面	317
	9.5　HDFS常用Java API详解	318
		9.5.1　使用Hadoop URL读取数据	318
		9.5.2　使用FileSystem API读取数据	320
		9.5.3　创建目录	325
		9.5.4　写数据	326
		9.5.5　删除数据	328
		9.5.6　文件系统查询	329
	9.6　HDFS中的读写数据流	335
		9.6.1　文件的读取	335
		9.6.2　文件的写入	338
		9.6.3　一致性模型	341
	9.7　HDFS命令详解	343
		9.7.1　通过distcp进行并行复制	343
		9.7.2　HDFS的平衡	346
		9.7.3　使用Hadoop归档文件	347
		9.7.4　其他命令	351
	9.8　WebHDFS	357
		9.8.1　WebHDFS的配置	357
		9.8.2　WebHDFS命令	358
	9.9　本章小结	364
第10章　Hadoop的管理	365
	10.1　HDFS文件结构	366
	10.2　Hadoop的状态监视和管理工具	373
		10.2.1　审计日志	373
		10.2.2　监控日志	374
		10.2.3　Metrics	376
		10.2.4　Java管理扩展	379
		10.2.5　Ganglia	381
		10.2.6　Hadoop管理命令	384
	10.3　Hadoop集群的维护	390
		10.3.2　Hadoop的备份	392
		10.3.3　Hadoop的节点管理	394
		10.3.4　系统升级	397
	10.4　本章小结	402
第11章　Hive详解	403
	11.1　Hive简介	404
		11.1.1　Hive的数据存储	404
		11.1.2　Hive的元数据存储	408
	11.2　Hive的基本操作	409
		11.2.1　在集群上安装Hive	409
		11.2.2　配置MySQL存储Hive元数据	413
		11.2.3　配置Hive	416
	11.3　Hive QL详解	419
		11.3.2　数据操作（DML）	435
		11.3.3　SQL操作	438
		11.3.4　Hive QL使用实例	443
	11.4　Hive网络（Web UI）接口	446
		11.4.1　Hive网络接口配置	446
		11.4.2　Hive网络接口操作实例	449
	11.5　Hive的JDBC接口	453
		11.5.1　Eclipse环境配置	453
		11.5.2　程序实例	455
	11.6　Hive的优化	459
	11.7　本章小结	463
第12章　HBase详解	464
	12.1　HBase简介	465
	12.2　HBase的基本操作	468
		12.2.1　HBase的安装	468
		12.2.2　运行HBase	474
		12.2.3　HBase Shell	478
		12.2.4　HBase配置	484
	12.3　HBase体系结构	487
		12.3.2　HRegion服务器	490
		12.3.3　HBase Master服务器	493
		12.3.4　ROOT表和META表	494
		12.3.5　ZooKeeper	496
	12.4　HBase数据模型	497
		12.4.2　概念视图	498
		12.4.3　物理视图	499
	12.5　HBase与RDBMS	500
	12.6　HBase与HDFS	502
	12.7　HBase客户端	503
	12.8　Java API	506
	12.9　HBase编程	514
		12.9.1　使用Eclipse开发HBase应用程序	514
		12.9.2　HBase编程	518
		12.9.3　HBase与MapReduce	522
	12.10　模式设计	526
		12.10.1　模式设计应遵循的原则	526
		12.10.2　学生表	529
		12.10.3　事件表	531
	12.11　本章小结	532
第13章　Mahout详解	533
	13.1　Mahout简介	534
	13.2　Mahout的安装和配置	535
	13.3　Mahout API简介	540
	13.4　Mahout中的频繁模式挖掘 13.4.1 什么是频繁模式挖掘	543
		13.4.2　Mahout中的频繁模式挖掘	544
	13.5　Mahout中的聚类和分类 13.5.1 什么是聚类和分类	547
		13.5.2　Mahout中的数据表示	549
		13.5.3　将文本转化成向量	551
		13.5.4　Mahout中的聚类、分类算法	553
		13.5.5　算法应用实例	561
	13.6　Mahout应用：建立一个推荐引擎	568
		13.6.2　使用Taste构建一个简单的推荐引擎	570
		13.6.3　简单分布式系统下基于产品的推荐系统简介	574
	13.7　本章小结	579
第14章　Pig详解	580
	14.1　Pig简介	581
	14.2　Pig的安装和配置	582
		14.2.2　Pig的下载、安装和配置	583
		14.2.3　Pig运行模式	585
	14.3　Pig Latin语言	590
		14.3.2　Pig Latin的使用	592
		14.3.3　Pig Latin的数据类型	596
		14.3.4　Pig Latin关键字	598
	14.4　用户定义函数	606
		14.4.1　编写用户定义函数	607
		14.4.2　使用用户定义函数	609
	14.5　Zebra简介	611
		14.5.1　Zebra的安装	611
		14.5.2　Zebra的使用简介	613
	14.6　Pig实例	615
		14.6.1　Local模式	615
		14.6.2　MapReduce模式	619
	14.7　Pig进阶	621
		14.7.1　数据实例	621
		14.7.2　Pig数据分析	623
	14.8　本章小结	631
第15章　ZooKeeper详解	632
	15.1　ZooKeeper简介	633
		15.1.1　ZooKeeper的设计目标	633
		15.1.2　数据模型和层次命名空间	635
		15.1.3　ZooKeeper中的节点和临时节点	636
		15.1.4　ZooKeeper的应用	637
	15.2　ZooKeeper的安装和配置	638
		15.2.1　安装ZooKeeper	638
		15.2.2　配置ZooKeeper	646
		15.2.3　运行ZooKeeper	650
	15.3　ZooKeeper的简单操作	655
		15.3.2　ZooKeeper API的简单使用	657
	15.4　ZooKeeper的特性	661
		15.4.2　ZooKeeper会话及状态	664
		15.4.3　ZooKeeper watches	666
		15.4.4　ZooKeeper ACL	667
		15.4.5　ZooKeeper的一致性保证	669
	15.5　使用ZooKeeper进行Leader选举	671
	15.6　ZooKeeper锁服务	672
		15.6.1　ZooKeeper中的锁机制	672
		15.6.2　ZooKeeper提供的一个写锁的实现	674
	15.7　使用ZooKeeper创建应用程序	676
		15.7.1　使用Eclipse开发ZooKeeper应用程序	676
		15.7.2　应用程序实例	680
	15.8　BooKeeper	686
	15.9　本章小结	689
第16章　Avro详解	690
	16.1　Avro介绍	691
		16.1.1　模式声明	694
		16.1.2　数据序列化	699
		16.1.3　数据排列顺序	704
		16.1.4　对象容器文件	706
		16.1.5　协议声明	709
		16.1.6　协议传输格式	711
		16.1.7　模式解析	716
	16.2　Avro的C/C++实现	718
	16.3　Avro的Java实现	732
	16.4　GenAvro（Avro IDL）语言	737
	16.5　Avro SASL概述	744
	16.6　本章小结	747
第17章　Chukwa详解	748
	17.1　Chukwa简介	749
	17.2　Chukwa架构	751
		17.2.1　客户端及其数据模型	751
		17.2.2　收集器	754
		17.2.3　归档器和分离解析器	757
		17.2.4　HICC	758
	17.3　Chukwa的可靠性	759
	17.4　Chukwa集群搭建 17.4.1 基本配置要求	760
		17.4.2　Chukwa的安装	761
		17.4.3　Chukwa的运行	767
	17.5　Chukwa数据流的处理	774
	17.6　Chukwa与其他监控系统比较	777
	17.7　本章小结	779
    本章参考资料	780
第18章　Hadoop的常用插件与开发	782
	18.1　Hadoop Studio的介绍和使用	783
		18.1.2　Hadoop Studio的安装配置	785
		18.1.3　Hadoop Studio的使用举例	787
	18.2　Hadoop Eclipse的介绍和使用	796
		18.2.2　Hadoop Eclipse的安装配置	797
		18.2.3　Hadoop Eclipse的使用举例	800
	18.3　Hadoop Streaming的介绍和使用	803
		18.3.2　Hadoop Streaming的使用举例	810
		18.3.3　使用Hadoop Streaming常见的问题	813
	18.4　Hadoop Libhdfs的介绍和使用	817
		18.4.2　Hadoop Libhdfs的安装配置	818
		18.4.3　Hadoop Libhdfs API简介	819
		18.4.4　Hadoop Libhdfs的使用举例	821
	18.5　本章小结	823
第19章　企业应用实例	824
	19.1　Hadoop在Yahoo！的应用	825
	19.2　Hadoop在eBay的应用	828
	19.3　Hadoop在百度的应用	832
	19.4　即刻搜索中的Hadoop 19.4.1 即刻搜索简介	838
		19.4.2　即刻Hadoop应用架构	839
		19.4.3　即刻Hadoop应用分析	843
	19.5　Facebook中的Hadoop和HBase	844
		19.5.1　Facebook中的任务特点	844
		19.5.2　MySQL VS Hadoop+HBase	850
		19.5.3　Hadoop和HBase的实现	852
	19.6　本章小结	861
    本章参考资料	862
附录A 云计算在线检测平台	863
	A.1　平台介绍	864
	A.2　结构和功能	867
		A.2.1　前台用户接口的结构和功能	867
		A.2.2　后台程序运行的结构和功能	869
		A.2.3　平台程序过滤功能	870
	A.3　检测流程	873
	A.4　使用介绍	875
		A.4.1　功能使用	875
		A.4.2　返回结果介绍	876
		A.4.3　使用注意事项	878
	A.5　小结	880
附录B Hadoop安装、运行与使用说明	881
	B.1　Hadoop安装	882
		B.1.2　SSH安装	884
		B.1.3　Hadoop安装	884
	B.2　Hadoop启动	889
	B.3　Hadoop使用	890
		B.3.2　运行MapReduce框架程序	890
附录C 使用DistributedCache的MapReduce程序	892
	C.1　程序场景	893
	C.2　详细代码	894
附录D 使用ChainMapper和ChainReducer的MapReduce程序	897
	D.1　程序场景	898
	D.2　详细代码	899
