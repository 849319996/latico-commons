目录	8
前言	5
第1章　Elasticsearch入门	13
	1.1　Elasticsearch是什么	13
		1.1.1　Elasticsearch的历史	14
		1.1.2　相关产品	15
	1.2　全文搜索	15
		1.2.1　Lucene介绍	16
		1.2.2　Lucene倒排索引	16
	1.3　基础知识	18
		1.3.1　Elasticsearch术语及概念	18
		1.3.2　JSON介绍	22
	1.4　安装配置	24
		1.4.1　安装Java	24
		1.4.2　安装Elasticsearch	24
		1.4.3　配置	25
		1.4.4　运行	27
		1.4.5　停止	29
		1.4.6　作为服务	29
		1.4.7　版本升级	31
	1.5　对外接口	33
		1.5.1　API约定	34
		1.5.2　REST介绍	37
		1.5.3　Head插件安装	38
		1.5.4　创建库	39
		1.5.5　插入数据	40
		1.5.6　修改文档	40
		1.5.7　查询文档	41
		1.5.8　删除文档	41
		1.5.9　删除库	42
	1.6　Java接口	42
		1.6.1　Java接口说明	42
		1.6.2　创建索引文档	45
		1.6.3　增加文档	46
		1.6.4　修改文档	47
		1.6.5　查询文档	47
		1.6.6　删除文档	47
	1.7　小结	48
第2章　索引	49
	2.1　索引管理	49
		2.1.1　创建索引	49
		2.1.2　删除索引	51
		2.1.3　获取索引	51
		2.1.4　打开/关闭索引	52
	2.2　索引映射管理	53
		2.2.1　增加映射	53
		2.2.2　获取映射	56
		2.2.3　获取字段映射	57
		2.2.4　判断类型是否存在	58
	2.3　索引别名	58
	2.4　索引配置	63
		2.4.1　更新索引配置	63
		2.4.2　获取配置	64
		2.4.3　索引分析	64
		2.4.4　索引模板	66
		2.4.5　复制配置	67
		2.4.6　重建索引	68
	2.5　索引监控	72
		2.5.1　索引统计	72
		2.5.2　索引分片	74
		2.5.3　索引恢复	75
		2.5.4　索引分片存储	76
	2.6　状态管理	76
		2.6.1　清除缓存	76
		2.6.2　索引刷新	76
		2.6.3　冲洗	77
		2.6.4　合并索引	77
	2.7　文档管理	78
		2.7.1　增加文档	78
		2.7.2　更新删除文档	81
		2.7.3　查询文档	85
		2.7.4　多文档操作	88
		2.7.5　索引词频率	92
		2.7.6　查询更新接口	95
	2.8　小结	99
第3章　映射	100
	3.1　概念	100
	3.2　字段数据类型	102
		3.2.1　核心数据类型	103
		3.2.2　复杂数据类型	108
		3.2.3　地理数据类型	112
		3.2.4　专门数据类型	118
	3.3　元字段	120
		3.3.1　_all字段	121
		3.3.2　_field_names字段	121
		3.3.3　_id字段	122
		3.3.4　_index字段	122
		3.3.5　_meta字段	123
		3.3.6　_parent字段	123
		3.3.7　_routing字段	124
		3.3.8　_source字段	126
		3.3.9　_type字段	127
		3.3.10　_uid字段	127
	3.4　映射参数	128
		3.4.1　analyzer参数	128
		3.4.2　boost参数	130
		3.4.3　coerce参数	131
		3.4.4　copy_to参数	132
		3.4.5　doc_values参数	133
		3.4.6　dynamic参数	134
		3.4.7　enabled参数	134
		3.4.8　fielddata参数	135
		3.4.9　format参数	138
		3.4.10　geohash参数	140
		3.4.11　geohash_precision参数	141
		3.4.12　geohash_prefix参数	142
		3.4.13　ignore_above参数	143
		3.4.14　ignore_malformed参数	143
		3.4.15　include_in_all参数	144
		3.4.16　index参数	145
		3.4.17　index_options参数	145
		3.4.18　lat_lon参数	146
		3.4.19　fields参数	147
		3.4.20　norms参数	148
		3.4.21　null_value参数	149
		3.4.22　position_increment_gap参数	149
		3.4.23　precision_step参数	150
		3.4.24　properties参数	150
		3.4.25　search_analyzer参数	151
		3.4.26　similarity参数	152
		3.4.27　store参数	153
		3.4.28　term_vector参数	153
	3.5　动态映射	154
		3.5.1　概念	154
		3.5.2　_default_映射	155
		3.5.3　动态字段映射	155
		3.5.4　动态模板	157
		3.5.5　重写默认模板	160
	3.6　小结	160
第4章　搜索	161
	4.1　深入搜索	161
		4.1.1　搜索方式	161
		4.1.2　重新评分	165
		4.1.3　滚动查询请求	167
		4.1.4　隐藏内容查询	170
		4.1.5　搜索相关函数	173
		4.1.6　搜索模板	176
	4.2　查询DSL	179
		4.2.1　查询和过滤的区别	179
		4.2.2　全文搜索	180
		4.2.3　字段查询	191
		4.2.4　复合查询	195
		4.2.5　连接查询	200
		4.2.6　地理查询	202
		4.2.7　跨度查询	209
		4.2.8　高亮显示	212
	4.3　简化查询	215
	4.4　小结	218
第5章　聚合	219
	5.1　聚合的分类	219
	5.2　度量聚合	221
		5.2.1　平均值聚合	221
		5.2.2　基数聚合	223
		5.2.3　最大值聚合	225
		5.2.4　最小值聚合	226
		5.2.5　和聚合	226
		5.2.6　值计数聚合	227
		5.2.7　统计聚合	227
		5.2.8　百分比聚合	227
		5.2.9　百分比分级聚合	228
		5.2.10　最高命中排行聚合	229
		5.2.11　脚本度量聚合	229
		5.2.12　地理边界聚合	233
		5.2.13　地理重心聚合	234
	5.3　分组聚合	235
		5.3.1　子聚合	236
		5.3.2　直方图聚合	238
		5.3.3　日期直方图聚合	242
		5.3.4　时间范围聚合	245
		5.3.5　范围聚合	246
		5.3.6　过滤聚合	247
		5.3.7　多重过滤聚合	248
		5.3.8　空值聚合	250
		5.3.9　嵌套聚合	251
		5.3.10　采样聚合	252
		5.3.11　重要索引词聚合	254
		5.3.12　索引词聚合	257
		5.3.13　总体聚合	263
		5.3.14　地理点距离聚合	263
		5.3.15　地理散列网格聚合	265
		5.3.16　IPv4范围聚合	267
	5.4　管道聚合	269
		5.4.1　平均分组聚合	271
		5.4.2　移动平均聚合	273
		5.4.3　总和分组聚合	274
		5.4.4　总和累计聚合	274
		5.4.5　最大分组聚合	276
		5.4.6　最小分组聚合	277
		5.4.7　统计分组聚合	278
		5.4.8　百分位分组聚合	280
		5.4.9　差值聚合	281
		5.4.10　分组脚本聚合	285
		5.4.11　串行差分聚合	287
		5.4.12　分组选择器聚合	288
	5.5　小结	289
第6章　集群管理	290
	6.1　集群节点监控	290
		6.1.1　集群健康值	290
		6.1.2　集群状态	291
		6.1.3　集群统计	292
		6.1.4　集群任务管理	292
		6.1.5　待定集群任务	293
		6.1.6　节点信息	293
		6.1.7　节点统计	294
	6.2　集群分片迁移	295
	6.3　集群节点配置	296
		6.3.1　主节点	297
		6.3.2　数据节点	298
		6.3.3　客户端节点	298
		6.3.4　部落节点	299
	6.4　节点发现	299
		6.4.1　主节点选举	300
		6.4.2　故障检测	300
	6.5　集群平衡配置	301
		6.5.1　分片分配设置	301
		6.5.2　基于磁盘的配置	302
		6.5.3　分片智能分配	303
		6.5.4　分片配置过滤	304
		6.5.5　其他集群配置	305
	6.6　小结	305
第7章　索引分词器	306
	7.1　分词器的概念	306
	7.2　中文分词器	310
	7.3　插件	312
		7.3.1　插件管理	313
		7.3.2　插件安装	313
		7.3.3　插件清单	314
	7.4　小结	316
第8章　高级配置	317
	8.1　网络相关配置	317
		8.1.1　本地网关配置	317
		8.1.2　HTTP配置	318
		8.1.3　网络配置	319
		8.1.4　传输配置	320
	8.2　脚本配置	322
		8.2.1　脚本使用	323
		8.2.2　脚本配置	325
	8.3　快照和恢复配置	330
	8.4　线程池配置	336
	8.5　索引配置	338
		8.5.1　缓存配置	338
		8.5.2　索引碎片分配	341
		8.5.3　合并	344
		8.5.4　相似模块	344
		8.5.5　响应慢日志监控	345
		8.5.6　存储	347
		8.5.7　事务日志	348
	8.6　小结	349
第9章　告警、监控和权限管理	350
	9.1　告警	350
		9.1.1　安装	350
		9.1.2　结构	351
		9.1.3　示例	364
		9.1.4　告警输出配置	366
		9.1.5　告警管理	367
	9.2　监控	368
		9.2.1　安装	368
		9.2.2　配置	369
	9.3　权限管理	372
		9.3.1　工作原理	373
		9.3.2　用户认证	373
		9.3.3　角色管理	378
		9.3.4　综合示例	380
	9.4　小结	381
第10章　ELK应用	382
	10.1　Logstash	382
		10.1.1　配置	383
		10.1.2　插件管理	386
	10.2　Kibana配置	389
		10.2.1　Discover	391
		10.2.2　Visualize	393
		10.2.3　Dashboard	395
		10.2.4　Settings	398
	10.3　综合示例	399
	10.4　小结	402
附录 Elasticsearch 5.0的特性与改进	403
